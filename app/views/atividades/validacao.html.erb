<div id="navegacao" style="width: 15%; float: left;">
  <button onclick="hideNavegacao()" class="nav-button" style="float: right">
    <i class="icon-double-angle-left"></i> Esconder
  </button>
  <br/>
  <%= form_tag validacao_atividades_path, {method: :get} do %>
    <%= hidden_field_tag :data, data(@mes, @ano) %>

    <div class="menu_select">
      <%= select_date @inicio, {:use_short_month => true, :prefix => 'inicio'},
        {:onchange => "this.form.submit()"} %>
      <%= select_date @fim, {:use_short_month => true, :prefix => 'fim'},
        {:onchange => "this.form.submit()"} %>
    </div>

    <%= select_tag(:projeto_id, options_for_select(@projetos, @projeto),
      {:class => 'menu_select', :onchange => "this.form.submit()"}) %>

    <%= select_tag(:usuario_id, options_for_select(@usuarios, @usuario),
      {:class => 'menu_select', :onchange => "this.form.submit()"}) %>

    <%= select_tag(:aprovacao, options_for_select(@aprovacoes, @aprovacao),
      {:class => 'menu_select', :onchange => "this.form.submit()"}) %>

    <%= button_tag "Limpar Filtro", :value => "limpar", :name => "commit",
      :class => "nav-button", :style => "margin: 10px" %>
    <p class="menu_select">
      <b> <%=  @total_horas %> horas exibidas </b>
    </p>
  <% end %>
</div>

<div id="lista" style="width: 85%; float: right;">
  <button id="show-navegacao" onclick="showNavegacao();" class="nav-button" style="visibility: hidden">
    Mostrar Navegação <i class="icon-double-angle-right"></i>
  </button>
  <table class="list-table">
    <tr>
      <th> Data       </th>
      <th> Usuário    </th>
      <th> Projeto    </th>
      <th> Duração    </th>
      <th> Detalhes   </th>
      <th> Parceiro(s)</th>
      <th> Status     </th>
    </tr>
    <tr>
      <% @atividades.each do |chave, atividades| %>
        <td rowspan="<%= atividades.size %>">
          <%= chave[1].data.strftime("%d/%m/%Y") %>
        </td>
        <td rowspan="<%= atividades.size %>" style="width: 150px;">
          <a href="<%= new_dia_path(:data=> chave[1].data, :usuario_id => chave[0].id) %>">
            <p style="text-decoration: underline"> <%= chave[0].nome %> </p>
          </a>
          <p> E: <%= chave[1].entrada %> S: <%= chave[1].saida %></p>
          <p> <%= int_to_horas chave[1].horas %> horas </p>
          <p> <%= chave[1].horas_atividades_todas %> horas </p>
        </td>
        <% atividades.each do |atividade| %>
          <td><%= atividade.try(:projeto).try(:nome) %> </td>
          <td><%= atividade.formata_duracao %> </td>
          <td>
            <%= atividade.observacao %>
            <% if atividade.trello_id %>
              <input type="hidden" class="card-placeholder" id="<%= atividade.trello_id %>"></input>
            <% end %>
          </td>
          <td>
            <% atividade.pares.each do |par| %>
              <p>
                <%= par.par.nome %>
                <%= int_to_horas(par.duracao) %>
              </p>
            <% end %>
          </td>
          <td style="width: 150px;">
            <div id="<%= atividade.id %>">
              <%= render :partial => 'aprovar', :locals => {:atividade => atividade}  %>
            </div>
          </td>
        </tr>
        <tr>
        <% end %>
      <% end %>
    </tr>
  </table>
</div>

<div class="modal fade" id="mensagens" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true" style="outline: none; overflow: hidden;">

</div>